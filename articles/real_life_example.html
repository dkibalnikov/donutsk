<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="donutsk">
<title>Real life example • donutsk</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Real life example">
<meta property="og:description" content="donutsk">
<meta property="og:image" content="https://dkibalnikov.github.io/donutsk/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">donutsk</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/real_life_example.html">Real life example</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/dkibalnikov/donutsk/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Real life example</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dkibalnikov/donutsk/blob/HEAD/vignettes/real_life_example.Rmd" class="external-link"><code>vignettes/real_life_example.Rmd</code></a></small>
      <div class="d-none name"><code>real_life_example.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="real-data">Real Data<a class="anchor" aria-label="anchor" href="#real-data"></a>
</h2>
<p>When dealing with new visualizations, it’s always important to assess
their feasibility in real-life scenarios. Pie or donut charts can
effectively display the structure of observable cases. A nested donut
chart can handle a two-level hierarchy, displaying a higher-level
overview as the internal donut and a more granular level as the external
donut. The key idea is to arrange and align the internal and external
levels.</p>
<p>To illustrate this concept, I will use GDP data obtained from The
World Bank using the <code>wbstats::wb_data()</code> function. The
indicator <code>NY.GDP.MKTP.PP.CD</code> represents Purchasing Power
Parity GDP in current international dollars. Each country’s GDP is
associated with its name and region, representing the aforementioned
two-level hierarchy.</p>
<p>Additionally, I aim to showcase prominent ggplot2 features such as
faceting and color palettes, seamlessly incorporated into the donutsk
package.</p>
</div>
<div class="section level2">
<h2 id="data-preparation">Data Preparation<a class="anchor" aria-label="anchor" href="#data-preparation"></a>
</h2>
<p>For insightful charts, it’s essential to differentiate crucial data
from less significant data. Using quantiles is a good approach to define
thresholds for categorizing low GDP values into a special category, such
as “Other”:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dkibalnikov/donutsk" class="external-link">donutsk</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: ggplot2</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span></span>
<span><span class="va">GDP1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">GDP</span>, <span class="va">date</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2001</span>, <span class="fl">2022</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>country <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">GDP</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">GDP</span>, <span class="fl">.9</span><span class="op">)</span>, <span class="va">country</span>, <span class="st">"Other"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">region</span>, <span class="va">region_ISO</span>, <span class="va">country</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>GDP <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">GDP</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">GDP1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 54 × 5</span></span></span>
<span><span class="co">#&gt;     date region                region_ISO country         GDP</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">2</span>001 East Asia &amp; Pacific   EAS        Australia   5.33<span style="color: #949494;">e</span>11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>  <span style="text-decoration: underline;">2</span>001 East Asia &amp; Pacific   EAS        China       4.08<span style="color: #949494;">e</span>12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">2</span>001 East Asia &amp; Pacific   EAS        Indonesia   1.06<span style="color: #949494;">e</span>12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">2</span>001 East Asia &amp; Pacific   EAS        Japan       3.55<span style="color: #949494;">e</span>12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">2</span>001 East Asia &amp; Pacific   EAS        Korea, Rep. 9.34<span style="color: #949494;">e</span>11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>  <span style="text-decoration: underline;">2</span>001 East Asia &amp; Pacific   EAS        Other       1.68<span style="color: #949494;">e</span>12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>  <span style="text-decoration: underline;">2</span>001 Europe &amp; Central Asia ECS        France      1.69<span style="color: #949494;">e</span>12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>  <span style="text-decoration: underline;">2</span>001 Europe &amp; Central Asia ECS        Germany     2.34<span style="color: #949494;">e</span>12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">2</span>001 Europe &amp; Central Asia ECS        Italy       1.60<span style="color: #949494;">e</span>12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">2</span>001 Europe &amp; Central Asia ECS        Other       4.37<span style="color: #949494;">e</span>12</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 44 more rows</span></span></span></code></pre></div>
<p>The donuts do not necessarily require eliminating duplication, but
for the given case, I prefer to have one GDP value per country. The
original dataset does not contain duplicates, but replacing country
names with “Other” changes the situation. In general, I suggest
considering aggregation to obtain a unique value per hierarchy for a
clearer outcome.</p>
<p>The next step in data preparation is arranging the data. This can be
done in two ways:</p>
<ol style="list-style-type: decimal">
<li>Utilize <code><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">dplyr::arrange()</a></code> to alphabetically order values
within each region.</li>
<li>Utilize <code><a href="../reference/packing.html">donutsk::packing()</a></code> to distribute small values
further apart from each other. While the second option simplifies the
labeling task, the first option is preferable for comparing World GDP
structures period versus period, since the order of countries will
remain the same unless a country falls into the “Other” category. I
would go with <code><a href="../reference/packing.html">donutsk::packing()</a></code> any time there are a lot
of small values alongside with big ones.</li>
</ol>
<p>The <code><a href="../reference/packing.html">donutsk::packing()</a></code> function requires a bit more
complicated data preparation using <code><a href="https://dplyr.tidyverse.org/reference/nest_by.html" class="external-link">dplyr::nest_by()</a></code> and
<code><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">tidyr::unnest()</a></code>. Once the preparation is ready, the data
can be combined into one dataset for further visualization.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">GDP2_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">GDP1</span>, <span class="va">date</span>, <span class="va">region_ISO</span><span class="op">)</span></span>
<span></span>
<span><span class="va">GDP2_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nest_by.html" class="external-link">nest_by</a></span><span class="op">(</span><span class="va">GDP1</span>, <span class="va">date</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="../reference/packing.html">packing</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">GDP</span>, <span class="va">region_ISO</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="st">"data"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">GDP2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span>`arrange()`<span class="op">=</span> <span class="va">GDP2_1</span>, `packing()`<span class="op">=</span> <span class="va">GDP2_2</span>, .id <span class="op">=</span> <span class="st">"Arrange type"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="charting">Charting<a class="anchor" aria-label="anchor" href="#charting"></a>
</h2>
<p>Labeling the donut segments is not very straightforward since it’s
highly possible to face label overlaps, which makes annotations
unreadable. In order to overcome such obstacles, I would rather leverage
<code><a href="../reference/layouts.html">eye()</a></code> to accommodate labels onto the chart. Such a layout
places labels in a controlled way, handling the label length pretty
well.</p>
<p>To bring more clarity to the analysis, I would prefer to indicate the
percentage for regions and countries using <code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue::glue()</a></code>
syntax and the internal pre-calculated variable <code>.prc</code>. It’s
enough to pass expression like <code>{scales::percent(.prc)}</code> to
get formatted percent.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">GDP2</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>value <span class="op">=</span> <span class="va">GDP</span>, fill <span class="op">=</span> <span class="va">region</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># Internal donat represents regions</span></span>
<span>  <span class="fu"><a href="../reference/donut_geom.html">geom_donut_int</a></span><span class="op">(</span>r_int <span class="op">=</span> <span class="fl">.25</span>, col<span class="op">=</span><span class="st">"white"</span>, linewidth<span class="op">=</span><span class="fl">.1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># External donat represents countries</span></span>
<span>  <span class="fu"><a href="../reference/donut_geom.html">geom_donut_ext</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>opacity <span class="op">=</span> <span class="va">country</span><span class="op">)</span>, col<span class="op">=</span><span class="st">"white"</span>, linewidth<span class="op">=</span><span class="fl">.1</span>, show.legend <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Text annotations for internal donut</span></span>
<span>  <span class="fu"><a href="../reference/donut_label.html">geom_text_int</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"{scales::percent(.prc)}"</span>, col <span class="op">=</span> <span class="va">region</span><span class="op">)</span>, </span>
<span>                size<span class="op">=</span><span class="fl">3</span>, r <span class="op">=</span> <span class="fl">1.25</span>, show.legend <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># Label annotations for internal donut</span></span>
<span>  <span class="fu"><a href="../reference/donut_label.html">geom_label_ext</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>col<span class="op">=</span><span class="va">region</span>, label<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">country</span>, <span class="st">"-{scales::percent(.prc, .01)}"</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                 size<span class="op">=</span><span class="fl">3</span>, col <span class="op">=</span> <span class="st">"white"</span>, layout <span class="op">=</span> <span class="fu"><a href="../reference/layouts.html">eye</a></span><span class="op">(</span><span class="op">)</span>, show.legend <span class="op">=</span> <span class="cn">F</span>,</span>
<span>                 label.padding<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="st">"lines"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># Link label annotations to specific country GDP segment</span></span>
<span>  <span class="fu"><a href="../reference/pins.html">geom_pin</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>col <span class="op">=</span> <span class="va">region</span><span class="op">)</span>,  </span>
<span>           size<span class="op">=</span><span class="fl">.5</span>, linewidth<span class="op">=</span><span class="fl">.1</span>, show.legend <span class="op">=</span> <span class="cn">F</span>, cut<span class="op">=</span><span class="fl">0</span>, layout <span class="op">=</span> <span class="fu"><a href="../reference/layouts.html">eye</a></span><span class="op">(</span><span class="op">)</span>, r <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># Adjust colors schema with palette</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"mako"</span>, begin <span class="op">=</span> <span class="fl">.1</span>, end <span class="op">=</span> <span class="fl">.8</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_color_viridis_d</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"mako"</span>, begin <span class="op">=</span> <span class="fl">.1</span>, end <span class="op">=</span> <span class="fl">.8</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" class="external-link">coord_radial</a></span><span class="op">(</span>theta <span class="op">=</span> <span class="st">"y"</span>, expand <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Splitting data to 4 subsets with different combinations Arrange type ~ Year</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">`Arrange type`</span><span class="op">~</span><span class="va">date</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">xlim</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"inside"</span>, axis.text<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>        axis.ticks<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>, panel.grid<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>        legend.position.inside<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.5</span><span class="op">)</span>, legend.direction <span class="op">=</span> <span class="st">"horizontal"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"GDP, PPP (current international $)"</span><span class="op">)</span></span></code></pre></div>
<p><img src="real_life_example_files/figure-html/unnamed-chunk-3-1.png" width="960">
As it was said, the <code><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange()</a></code> method for the given case is
preferable. It’s quite convenient to make structure comparisons for
European countries, spotting Poland in the 2022 year as an additional
one compared to 2001. It’s also easy to notice that Asia has captured
the first GDP place from Europe. The aforementioned insights are way
more difficult to identify with the <code><a href="../reference/packing.html">packing()</a></code> version.</p>
<p>This example can look a bit cumbersome because of additional
artificial level of complexity - <code>Arrange type</code>. The Real
life example will look as follows:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">GDP2_1</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>value <span class="op">=</span> <span class="va">GDP</span>, fill <span class="op">=</span> <span class="va">region</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># Internal donat represents regions</span></span>
<span>  <span class="fu"><a href="../reference/donut_geom.html">geom_donut_int</a></span><span class="op">(</span>r_int <span class="op">=</span> <span class="fl">.25</span>, col<span class="op">=</span><span class="st">"white"</span>, linewidth<span class="op">=</span><span class="fl">.1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># External donat represents countries</span></span>
<span>  <span class="fu"><a href="../reference/donut_geom.html">geom_donut_ext</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>opacity <span class="op">=</span> <span class="va">country</span><span class="op">)</span>, col<span class="op">=</span><span class="st">"white"</span>, linewidth<span class="op">=</span><span class="fl">.1</span>, show.legend <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Text annotations for internal donut</span></span>
<span>  <span class="fu"><a href="../reference/donut_label.html">geom_text_int</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"{scales::percent(.prc)}"</span>, col <span class="op">=</span> <span class="va">region</span><span class="op">)</span>, </span>
<span>                size<span class="op">=</span><span class="fl">3</span>, r <span class="op">=</span> <span class="fl">1.25</span>, show.legend <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># Label annotations for internal donut</span></span>
<span>  <span class="fu"><a href="../reference/donut_label.html">geom_label_ext</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>col<span class="op">=</span><span class="va">region</span>, label<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">country</span>, <span class="st">"-{scales::percent(.prc, .01)}"</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                 size<span class="op">=</span><span class="fl">3</span>, col <span class="op">=</span> <span class="st">"white"</span>, layout <span class="op">=</span> <span class="fu"><a href="../reference/layouts.html">eye</a></span><span class="op">(</span><span class="op">)</span>, show.legend <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># Link label annotations to specific country GDP segment</span></span>
<span>  <span class="fu"><a href="../reference/pins.html">geom_pin</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>col <span class="op">=</span> <span class="va">region</span><span class="op">)</span>,  </span>
<span>           size<span class="op">=</span><span class="fl">.5</span>, linewidth<span class="op">=</span><span class="fl">.1</span>, show.legend <span class="op">=</span> <span class="cn">F</span>, cut<span class="op">=</span><span class="fl">0</span>, layout <span class="op">=</span> <span class="fu"><a href="../reference/layouts.html">eye</a></span><span class="op">(</span><span class="op">)</span>, r <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># Adjust colors schema with palette</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"mako"</span>, begin <span class="op">=</span> <span class="fl">.1</span>, end <span class="op">=</span> <span class="fl">.8</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_color_viridis_d</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"mako"</span>, begin <span class="op">=</span> <span class="fl">.1</span>, end <span class="op">=</span> <span class="fl">.8</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" class="external-link">coord_radial</a></span><span class="op">(</span>theta <span class="op">=</span> <span class="st">"y"</span>, expand <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Splitting data to 4 subsets with different combinations Arrange type ~ Year</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">date</span><span class="op">~</span><span class="va">.</span>, switch <span class="op">=</span> <span class="st">"x"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">xlim</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"inside"</span>, axis.text<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>        axis.ticks<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>, panel.grid<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>        legend.position.inside<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.5</span><span class="op">)</span>, legend.direction <span class="op">=</span> <span class="st">"horizontal"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"GDP, PPP (current international $)"</span>, fill<span class="op">=</span><span class="st">""</span><span class="op">)</span></span></code></pre></div>
<p><img src="real_life_example_files/figure-html/unnamed-chunk-4-1.png" width="672"></p>
<p>There is another way to distribute labels without overlap, leveraging
the <code><a href="../reference/layouts.html">tv()</a></code> layout and the thinner parameter, which builds two
levels to display labels. Since it’s another approach, I would relax the
quantile threshold up to a value of 0.95.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Prepare data using more strict threshold </span></span>
<span><span class="va">GDP4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">GDP</span>, <span class="va">date</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2001</span>, <span class="fl">2022</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>country <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">GDP</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">GDP</span>, <span class="fl">.95</span><span class="op">)</span>, <span class="va">country</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Other\n"</span>, <span class="va">region_ISO</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">region</span>, <span class="va">region_ISO</span>, <span class="va">country</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>GDP <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">GDP</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Prepare arranged data alphabethically </span></span>
<span><span class="va">GDP5_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">GDP4</span>, <span class="va">date</span>, <span class="va">region_ISO</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Utilize packing() for data ordering</span></span>
<span><span class="va">GDP5_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nest_by.html" class="external-link">nest_by</a></span><span class="op">(</span><span class="va">GDP4</span>, <span class="va">date</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="../reference/packing.html">packing</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">GDP</span>, <span class="va">region_ISO</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="st">"data"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Combine two arrange types together</span></span>
<span><span class="va">GDP5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span>`arrange()`<span class="op">=</span> <span class="va">GDP5_1</span>, `packing()`<span class="op">=</span> <span class="va">GDP5_2</span>, .id <span class="op">=</span> <span class="st">"Arrange type"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set layout parameters </span></span>
<span><span class="va">tv_lt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/layouts.html">tv</a></span><span class="op">(</span>scale_x <span class="op">=</span> <span class="fl">3</span>, scale_y <span class="op">=</span> <span class="fl">3</span>, thinner <span class="op">=</span> <span class="cn">T</span>, thinner_gap <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build donut chart </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">GDP5</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>value <span class="op">=</span> <span class="va">GDP</span>, fill <span class="op">=</span> <span class="va">region</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="../reference/donut_geom.html">geom_donut_int</a></span><span class="op">(</span>r_int <span class="op">=</span> <span class="fl">.25</span>, col<span class="op">=</span><span class="st">"white"</span>, linewidth<span class="op">=</span><span class="fl">.1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/donut_geom.html">geom_donut_ext</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>opacity <span class="op">=</span> <span class="va">country</span><span class="op">)</span>, col<span class="op">=</span><span class="st">"white"</span>, linewidth<span class="op">=</span><span class="fl">.1</span>, show.legend <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/donut_label.html">geom_text_int</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"{scales::percent(.prc)}"</span>, col <span class="op">=</span> <span class="va">region</span><span class="op">)</span>, </span>
<span>                size<span class="op">=</span><span class="fl">3</span>, r <span class="op">=</span> <span class="fl">1.25</span>, show.legend <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="../reference/pins.html">geom_pin</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>col <span class="op">=</span> <span class="va">region</span><span class="op">)</span>, size<span class="op">=</span><span class="fl">.5</span>, linewidth<span class="op">=</span><span class="fl">.1</span>, show.legend <span class="op">=</span> <span class="cn">F</span>, cut<span class="op">=</span><span class="fl">.1</span>, r <span class="op">=</span> <span class="fl">1.9</span>,</span>
<span>           layout <span class="op">=</span>  <span class="va">tv_lt</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/donut_label.html">geom_label_ext</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>col <span class="op">=</span> <span class="va">region</span>, </span>
<span>                     label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></span><span class="op">(</span><span class="va">country</span>, <span class="fl">5</span><span class="op">)</span>,<span class="st">"\n{scales::percent(.prc, .01)}"</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                 size<span class="op">=</span><span class="fl">3</span>, col <span class="op">=</span> <span class="st">"white"</span>, show.legend <span class="op">=</span> <span class="cn">F</span>, label.padding<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="st">"lines"</span><span class="op">)</span>,</span>
<span>                 lineheight <span class="op">=</span> <span class="fl">.8</span>, layout <span class="op">=</span> <span class="va">tv_lt</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"mako"</span>, begin <span class="op">=</span> <span class="fl">.1</span>, end <span class="op">=</span> <span class="fl">.8</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_color_viridis_d</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"mako"</span>, begin <span class="op">=</span> <span class="fl">.1</span>, end <span class="op">=</span> <span class="fl">.8</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_polar.html" class="external-link">coord_radial</a></span><span class="op">(</span>theta <span class="op">=</span> <span class="st">"y"</span>, expand <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">`Arrange type`</span><span class="op">~</span><span class="va">date</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position<span class="op">=</span><span class="st">"inside"</span>, axis.text<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>        axis.ticks<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>, panel.grid<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>        legend.position.inside<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.5</span>, <span class="fl">.5</span><span class="op">)</span>, legend.direction <span class="op">=</span> <span class="st">"horizontal"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"GDP, PPP (current international $)"</span><span class="op">)</span></span></code></pre></div>
<p><img src="real_life_example_files/figure-html/unnamed-chunk-5-1.png" width="960"></p>
<p>These examples illustrate a trade-off between the
<code><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange()</a></code> and <code><a href="../reference/packing.html">packing()</a></code> functions. The
<code><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange()</a></code> function is better suited for year-over-year
comparisons as it maintains the same order across the years. However,
the <code><a href="../reference/packing.html">packing()</a></code> function allocates chart space more
efficiently by distributing small values among larger values which leads
to less label overlaps.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Dmitry Kibalnikov.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
